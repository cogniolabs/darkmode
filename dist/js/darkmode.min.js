var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var a in e=arguments[o])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},Darkmode=(()=>{function t(t){this.options=__assign({enabled_switch:!0,os_aware:!0,color_scheme:"default",colors:{default:{body:"#282c35",texts:"#d6d6d6",border:"#4a4a4a",links:"#45a29e"}},button_type:"icon",button_text:"Toggle Dark Mode",accessibility_buttons:!1,auto_sunset:!1,auto_time:null,keyboard_shortcut:!0},t=void 0===t?{}:t),this.localStorage=window.localStorage,this.button=null,this.options.enabled_switch&&(this.button=this.createButton()),this.options.accessibility_buttons&&this.createAccessibilityButtons(),this.options.keyboard_shortcut&&this.enableKeyboardShortcut()}return t.prototype.init=function(){var t="true"===this.localStorage.getItem("darkmode"),e=null===this.localStorage.getItem("darkmode");this.options.os_aware&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&e&&this.toggle(),t&&this.toggle(),this.options.enabled_switch&&this.button&&this.button.addEventListener("click",this.toggle.bind(this)),this.options.auto_sunset&&this.enableAutoSunset(),this.options.auto_time&&this.enableAutoTime(),this.applyDarkmodeCss()},t.prototype.createButton=function(){var t=document.createElement("button");switch(t.classList.add("darkmode-toggle"),this.options.button_type){case"icon":t.innerHTML="ðŸŒ“";break;case"text":t.textContent=this.options.button_text;break;case"both":t.innerHTML="ðŸŒ“ ".concat(this.options.button_text)}return t.setAttribute("aria-label","Toggle dark mode"),document.body.appendChild(t),t},t.prototype.createAccessibilityButtons=function(){var t=this,e=document.createElement("div"),o=(e.classList.add("darkmode-accessibility"),document.createElement("button")),n=(o.textContent="Increase Contrast",o.addEventListener("click",function(){return t.adjustContrast(.1)}),document.createElement("button"));n.textContent="Decrease Contrast",n.addEventListener("click",function(){return t.adjustContrast(-.1)}),e.appendChild(o),e.appendChild(n),document.body.appendChild(e)},t.prototype.adjustContrast=function(t){var e=document.documentElement,o=parseFloat(getComputedStyle(e).getPropertyValue("--darkmode-contrast")||"1"),o=Math.max(.5,Math.min(2,o+t));e.style.setProperty("--darkmode-contrast",o.toString())},t.prototype.enableKeyboardShortcut=function(){var e=this;document.addEventListener("keydown",function(t){t.ctrlKey&&t.altKey&&"d"===t.key&&e.toggle()})},t.prototype.enableAutoSunset=function(){function t(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){var t=t.coords,e=t.latitude,t=t.longitude,o=new Date,e=n.calculateSunsetSunrise(e,t,o);(e<o&&!n.isDarkMode()||o<e&&n.isDarkMode())&&n.toggle()})}var n=this;t(),setInterval(t,6e4)},t.prototype.calculateSunsetSunrise=function(t,e,o){t=18-t/10;return new Date(o.getFullYear(),o.getMonth(),o.getDate(),t,0,0)},t.prototype.enableAutoTime=function(){function t(){var t=new Date,e=(o=n.options.auto_time.split(":").map(Number))[0],o=o[1];((e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,o))<=t&&!n.isDarkMode()||t<e&&n.isDarkMode())&&n.toggle()}var n=this;t(),setInterval(t,6e4)},t.prototype.isDarkMode=function(){return document.body.classList.contains("darkmode-active")},t.prototype.toggle=function(){var t=document.body.classList.toggle("darkmode-active");this.localStorage.setItem("darkmode",t.toString()),this.options.enabled_switch&&this.button&&this.button.setAttribute("aria-label",t?"Deactivate dark mode":"Activate dark mode")},t.prototype.applyDarkmodeCss=function(){var t=this.options.colors[this.options.color_scheme],e=t.body,o=t.texts,n=t.border,t=t.links,e="\n\t\t\t:root {\n\t\t\t\t--darkmode-contrast: 1;\n\t\t\t}\n\t\t\tbody.darkmode-active {\n\t\t\t\tbackground-color: ".concat(e,";\n\t\t\t\tcolor: ").concat(o,";\n\t\t\t\tfilter: contrast(var(--darkmode-contrast));\n\t\t\t}\n\t\t\tbody.darkmode-active :not(img):not(.darkmode-ignore) {\n\t\t\t\tborder-color: ").concat(n," !important;\n\t\t\t}\n\t\t\tbody.darkmode-active a:not(.darkmode-ignore) {\n\t\t\t\tcolor: ").concat(t,";\n\t\t\t}\n\t\t\t.darkmode-accessibility {\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 20px;\n\t\t\t\tright: 20px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t\t.darkmode-accessibility button {\n\t\t\t\tmargin: 5px;\n\t\t\t\tpadding: 5px 10px;\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t"),o=document.createElement("style");o.textContent=e,document.head.appendChild(o)},t})();export default Darkmode;