((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Darkmode=e()})(this,function(){var e=function(){return(e=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},t=(o.prototype.init=function(){this.setupDarkmodeButton(),this.options.keyboardShortcut&&this.setupKeyboardShortcut(),this.shouldEnableDarkMode()&&this.enableDarkMode(),this.options.autoSunset&&this.setupAutoSunset(),this.options.autoTime&&this.setupAutoTime(),this.applyDarkmodeCss(),this.handleOSPreferenceChange()},o.prototype.setupDarkmodeButton=function(){var t,e=this;this.options.enabledSwitch&&(this.button=document.querySelector(".darkmode-toggle"),null!=(t=this.button))&&t.addEventListener("click",function(){e.toggleDarkMode()})},o.prototype.setupKeyboardShortcut=function(){var e=this;document.addEventListener("keydown",function(t){(t.ctrlKey&&t.altKey&&"d"===t.key.toLowerCase()||t.ctrlKey&&t.shiftKey&&"d"===t.key.toLowerCase())&&e.toggleDarkMode()})},o.prototype.setupAutoSunset=function(){function t(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){t=t.coords,t=e.calculateSunsetTime(t.latitude,t.longitude);e.toggleDarkModeBasedOnTime(new Date,t)})}var e=this;t(),setInterval(t,6e4)},o.prototype.setupAutoTime=function(){function t(){var t=new Date,e=(o=n.options.autoTime.split(":").map(Number))[0],o=o[1],e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,o);n.toggleDarkModeBasedOnTime(t,e)}var n=this;t(),setInterval(t,6e4)},o.prototype.shouldEnableDarkMode=function(){var t=this.getCookie("darkmode"),e=window.matchMedia("(prefers-color-scheme: dark)").matches;return"true"===t||this.options.osAware&&null===t&&e},o.prototype.isDarkMode=function(){return document.body.classList.contains("darkmode-active")},o.prototype.toggleDarkMode=function(){!this.isDarkMode()?(document.body.classList.add("darkmode-active"),this.setCookie("darkmode","true",365)):(document.body.classList.remove("darkmode-active"),this.setCookie("darkmode","false",365))},o.prototype.enableDarkMode=function(){document.body.classList.add("darkmode-active"),this.setCookie("darkmode","true",365)},o.prototype.toggleDarkModeBasedOnTime=function(t,e){e<=t&&!this.isDarkMode()&&this.enableDarkMode(),t<e&&this.isDarkMode()&&this.toggleDarkMode()},o.prototype.calculateSunsetTime=function(t,e){t=18-t/10;return new Date((new Date).setHours(t,0,0))},o.prototype.applyDarkmodeCss=function(){var t=this.options.colors[this.options.colorScheme]||this.options.colors.default,e=t.body,o=t.texts,n=t.border,t=t.links,e="\n\t\t\t.darkmode-active {\n\t\t\t  background-color: ".concat(e,";\n\t\t\t  color: ").concat(o,";\n\t\t\t}\n\t\t\t.darkmode-active a {\n\t\t\t  color: ").concat(t,";\n\t\t\t}\n\t\t\t.darkmode-active * {\n\t\t\t  border-color: ").concat(n,";\n\t\t\t}\n\t\t"),o=document.createElement("style");o.textContent=e,document.head.appendChild(o)},o.prototype.handleOSPreferenceChange=function(){var e=this;this.options.osAware&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(t){null===e.getCookie("darkmode")&&(t.matches?e.enableDarkMode():e.disableDarkMode())})},o.prototype.disableDarkMode=function(){document.body.classList.remove("darkmode-active"),this.setCookie("darkmode","false",365)},o.prototype.setCookie=function(t,e,o){var n=new Date,o=(n.setTime(n.getTime()+24*o*60*60*1e3),"expires="+n.toUTCString());document.cookie="".concat(t,"=").concat(e,";").concat(o,";path=/;SameSite=Strict")},o.prototype.getCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){var i=o[n].trim();if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},o);function o(t){this.options=e({enabledSwitch:!0,osAware:!0,colorScheme:"default",colors:{},autoSunset:!1,autoTime:null,keyboardShortcut:!0},t=void 0===t?{}:t),this.button=null}return"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=t),"undefined"!=typeof window&&(window.Darkmode=t),t});